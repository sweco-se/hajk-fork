<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: controls/ScaleLine.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: controls/ScaleLine.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React from "react";
import { withStyles } from "@material-ui/core/styles";
import { ScaleLine } from "ol/control";
import { Paper, Tooltip } from "@material-ui/core";

const styles = theme => {
  return {
    scaleLine: {
      "&amp; .ol-scale-line": {
        position: "static",
        right: "inherit",
        bottom: "inherit",
        padding: "3px",
        background: theme.palette.background.paper,
        boxShadow: theme.shadows[4],
        border: "1px solid rgba(255 ,255, 255, 0.5)",
        borderRadius: "2px"
      },
      "&amp; .ol-scale-line-inner": {
        cursor: "default",
        borderColor: theme.palette.text.primary,
        color: theme.palette.text.primary,
        fontSize: "0.7em",
        lineHeight: "1.5em"
      }
    },
    scaleBadge: {
      padding: "0 4px",
      color: "rgba(0, 0, 0, 0.87)",
      fontSize: "0.7em",
      lineHeight: "25px",
      borderRadius: "2px",
      cursor: "default"
    }
  };
};

class ScaleLineControl extends React.PureComponent {
  state = {
    scale: 0
  };

  componentDidUpdate() {
    // Important condition, to ensure that we don't add new ScaleLine and Binds each time value changes
    if (this.props.map &amp;&amp; this.refs.scaleLine.children.length === 0) {
      // Set initial value of scale
      this.setState({
        scale: this.formatScale(this.getScale())
      });

      // Add ScaleLine
      const scaleLineControl = new ScaleLine({
        target: this.refs.scaleLine
      });
      this.props.map.addControl(scaleLineControl);

      // Add custom scale bar with numbers (e.g. 1:1000)
      // Bind change event to update current scale
      this.props.map.getView().on("change:resolution", () => {
        this.setState({
          scale: this.formatScale(this.getScale())
        });
      });
    }
  }

  /**
   * Get current map sclae
   * @instance
   * @return {number} map scale
   */
  getScale() {
    const dpi = 25.4 / 0.28,
      mpu = this.props.map
        .getView()
        .getProjection()
        .getMetersPerUnit(),
      inchesPerMeter = 39.37,
      res = this.props.map.getView().getResolution();

    return res * mpu * inchesPerMeter * dpi;
  }

  /**
   * Format scale
   * @instance
   * @param {number} scale
   * @return {string} formatted
   */
  formatScale(scale) {
    return Math.round(scale)
      .toString()
      .replace(/\B(?=(\d{3})+(?!\d))/g, " ");
  }

  renderScaleBadge() {
    const { classes } = this.props;
    return (
      &lt;Tooltip title="Nuvarande skala">
        &lt;Paper elevation={4} className={classes.scaleBadge}>
          1:{this.state.scale}
        &lt;/Paper>
      &lt;/Tooltip>
    );
  }

  render() {
    const { classes } = this.props;
    return (
      &lt;>
        &lt;div ref="scaleLine" className={classes.scaleLine} />
        {this.renderScaleBadge()}
      &lt;/>
    );
  }
}

export default withStyles(styles)(ScaleLineControl);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-ArcGISLayer-module.html">ArcGISLayer-module</a></li><li><a href="module-HighlightLayer-module.html">HighlightLayer-module</a></li><li><a href="module-WfsLayer-module.html">WfsLayer-module</a></li><li><a href="module-WMSLayer-module.html">WMSLayer-module</a></li></ul><h3>Classes</h3><ul><li><a href="AppModel.html">AppModel</a></li><li><a href="ArcGISLayer.html">ArcGISLayer</a></li><li><a href="HighlightLayer.html">HighlightLayer</a></li><li><a href="WfsLayer.html">WfsLayer</a></li></ul><h3>Global</h3><ul><li><a href="global.html#arePropsEqual">arePropsEqual</a></li><li><a href="global.html#CookieNotice">CookieNotice</a></li><li><a href="global.html#deepMerge">deepMerge</a></li><li><a href="global.html#getTheme">getTheme</a></li><li><a href="global.html#handleClick">handleClick</a></li><li><a href="global.html#PluginWindows">PluginWindows</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Fri Oct 18 2019 09:37:19 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
